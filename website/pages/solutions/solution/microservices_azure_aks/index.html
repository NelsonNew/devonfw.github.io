<!DOCTYPE html><html lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Microservice Platforms Solutions - Azure Kubernetes Service</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>

<!-- ******************************************** -->


<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt="">
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="#header_https://www.katacoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input id="search-field" type="search" class="form-control mr-sm-2" placeholder="Search by keyword(s)..." aria-label="Search" style="height: auto;" autocomplete="off">
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width="auto" height="auto" alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc">
<div class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#index.asciidoc_microservice-platforms-solutions---azure-kubernetes-service">Microservice Platforms Solutions - Azure Kubernetes Service</a>
<ul class="sectlevel2">
<li><a href="#index.asciidoc_infrastructure">Infrastructure</a></li>
<li><a href="#index.asciidoc_application">Application</a></li>
</ul>
</li>
<li><a href="#index.asciidoc_credits">Credits</a></li>
</ul>
<div class="sect1">
<h2 id="index.asciidoc_microservice-platforms-solutions---azure-kubernetes-service">Microservice Platforms Solutions - Azure Kubernetes Service</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="index.asciidoc_infrastructure">Infrastructure</h3>
<div class="sect3">
<h4 id="index.asciidoc_overview">Overview</h4>
<div class="paragraph">
<p>The solution is to use Azure Kubernetes Service and the following platform features regarding. The focus of this chapter is to introduce the relevant features. Recommendations for a concrete setup are given in the next chapter.
The platform features that (can) complement Kubernetes are:</p>
</div>
<div class="paragraph">
<p>The services that (can) complement Kubernetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Advisory</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Proactive and actionable recommendations from Azure Advisor based on your configuration and usage telemetry as described here.</p>
</div>
</div>
</div>
</li>
<li>
<p>Provisioning</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use Bridge to Kubernetes to iteratively develop, test, and debug microservices targeted for AKS clusters. It is a <a href="https://azure.microsoft.com/de-de/updates/azure-dev-spaces-is-retiring-on-31-october-2023/">client-only experience</a> offered through extensions in Visual Studio and Visual Studio Code. See also Provisioning for general aspects and service options for creating pipelines for creating infrastructure.</p>
</div>
</div>
</div>
</li>
<li>
<p>Compliance</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Use security measures on networking level to avoid public IPs. Combine AKS with additional services to control ingress and outgoing traffic such as Application Gateway or firewalls.</p>
</div>
<div class="paragraph">
<p>Enforce compliance rules to your cluster and CI/CD pipeline consistently with Azure Policy. Azure Active Directory provides access control with role-based-access-controls (RBAC) and service principals/ managed identities to back RBAC roles. Integration with Azure Security Center can provide security management, intelligent threat detection and actionable recommendations.</p>
</div>
</div>
</div>
</li>
<li>
<p>Desaster recovery</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Higher availability using redundancies across availability zones, protecting applications from datacenter failures. Paired region deployment for disaster recovery.</p>
</div>
</div>
</div>
</li>
<li>
<p>Monitoring</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For infrastructure monitoring see "Monitoring". For infrastructure monitoring specific pages in Azure Monitor exist which will be described here.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The picture below summarizes some of the services mentioned above:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="aks_overview.png" alt="AKS Overview" width="794" height="568">
</div>
</div>
</div>
<div class="sect3">
<h4 id="index.asciidoc_detailed-native-setup">Detailed Native Setup</h4>
<div class="paragraph">
<p>AKS comes with the following additional features regarding the <strong>orchestration platform</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scaling</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Virtual nodes enable network communication between pods that run in Azure Container Instances (ACI) and the AKS cluster. To provide this communication, a virtual network subnet is created and delegated permissions are assigned. Virtual nodes only work with AKS clusters created using advanced networking (Azure CNI). By default, AKS clusters are created with basic networking (kubenet). This implementation allows fast scaling of services for unpredictable traffic.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="virtual_nodes.png" alt="Virtual Nodes" width="1394" height="746">
</div>
</div>
</div>
</div>
</li>
<li>
<p>Compliance</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p><strong>Kubernet-dashboard</strong> has been used in the past for attacks. Either disable it or mitigate the attack potential by adding token security.</p>
</div>
<div class="paragraph">
<p>AKS used to rely on <strong>service principals</strong> (SP), which are technical principals in AAD. They came with some challenges like being stored on the nodes and the need to rotate them. SPs allowed an AKS cluster to interact with other Azure resources. Managed service identity (MSI) is a wrapper for SP, it provides auto rotation and if its system assigned then it has the same life cycle as the resource. AKS uses several managed identities for built-in services and add-ons as described <a href="https://docs.microsoft.com/en-us/azure/aks/use-managed-identity">here</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Control plane</p>
</li>
<li>
<p>Agent pool</p>
</li>
<li>
<p>Pod identity (Preview as of 13.10.2021)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Role based access control</strong> (RBAC) can be used for Authentication and Authorization. Predefined roles are: Cluster admin/ Cluster user = developer. Setting it up requires (1) setting up a cluster role and (2) binding the Cluster Role to a user/ cluster identity.</p>
</div>
<div class="paragraph">
<p><strong>Operating system security patches</strong> are automatically pushed to your nodes on a nightly schedule. AKS uses a security hardened operating system image which complies to CIS benchmark.</p>
</div>
<div class="paragraph">
<p><strong>Network security</strong> can be used to reduce attack potential. A private AKS is located inside a VNET and only exposes the ingress controller with a public IP. Interact with the Kubernetes API server as a private endpoint using Azure Private Link. To improve cluster security and minimize attacks, the API server should only be accessible from a limited set of IP address ranges.</p>
</div>
<div class="paragraph">
<p><strong>Azure policies</strong> offer built-in policies to secure pods and built-in initiatives which map to pod security policies. They replace pod security policies and work with gatekeeper/ Open Policy Agent (OPA) under the hood as described here. In Kubernetes, Admission Controllers enforce semantic validation of objects during create, update, and delete operations. With Open Policy Agent (OPA) you can enforce custom policies on Kubernetes objects without recompiling or reconfiguring the Kubernetes API server.</p>
</div>
<div class="paragraph">
<p>The principle of least privilege should be applied to how traffic can flow between pods in an Azure Kubernetes Service (AKS) cluster. Let’s say you likely want to block traffic directly to back-end applications. The <strong>Network Policy feature</strong> in Kubernetes lets you define rules for ingress and egress traffic between pods in a cluster. <a href="https://docs.microsoft.com/en-us/azure/aks/use-network-policies">Two options</a> for implementation exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Azure’s own implementation, called Azure Network Policies.</p>
</li>
<li>
<p>Calico Network Policies, an open-source network and network security solution founded by Tigera.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Provisioning</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Environments can be created by logical isolation (namespaces) or phyiscal (multiple clusters). Logical is usually recommended for dev/test whereas pysical for prod.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="index.asciidoc_variations">Variations</h4>
<div class="paragraph">
<p>The following additional extra tools can be used in conjunction with Kubernetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extensions orchestration platform</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>DAPR is a distributed framework that provides application services to applications such as publish subscribe as described here.
Open Service Mesh (OSM) add-on for Azure Kubernetes Service (AKS) is now available in public preview as of 10.09.2021. OSM implements Service Mesh Interface to provide the most common service mesh features as described here.</p>
</div>
</div>
</div>
</li>
<li>
<p>Configuration</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Tools for accessing sensitive information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>FlexDriver:</strong> Meet rigorous compliance requirements with secrets centrally stored outside of clusters. Access application-specific keys, secrets, and certificates natively within Kubernetes from Azure Key Vault. Mount Azure Key Vault stores via flexvolume driver <a href="https://github.com/Azure/kubernetes-keyvault-flexvol" class="bare">https://github.com/Azure/kubernetes-keyvault-flexvol</a></p>
</li>
<li>
<p><strong>Azure Key Vault to Kubernetes (akv2k8s):</strong> Used for our applications, to make Azure Key Vault secrets, certificates and keys available to use in a secure way. The goals of Azure Key Vault to Kubernetes are to avoid a direct program dependency for getting secrets, secure and low risk to transfer Azure Key Vault secrets and transparently inject secrets into applications. Per default secrets, configurations and certificates can be easily read and accessed by users in Kubernetes and access to them can only be restricted by setting access rights. This will be avoided and is a huge benefit of using akv2k8s with a simple setup of Azure Key Vault and the option to set more detailed restrictions and configurations.</p>
</li>
<li>
<p><a href="https://github.com/Azure/secrets-store-csi-driver-provider-azure/">secrets-store-csi-driver</a> better rated than (akv2k8s). If you want to get from multiple keyvaults secrets using multiple identities you had to have multiple instances of akv2k8s running. And secret store csi driver is more mature in general.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tools for synchronizing configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ArgoCD:</strong> ArgoCD is a leader developed by Intuit and synchronizes changes in the code of applications, photos and cluster definitions, so the Git - repository, to the cluster. The solution is open source software, kept relatively simple and is one of the most important and oldest tools on the market.</p>
</li>
<li>
<p><strong>Flux:</strong> Flux basically does the same job as ArgoCD, i.e. synchronizes the repository and cluster in the course of continuous delivery. Flux is also open source and kept simple - the special thing: It comes from the GitOps inventor Weaveworks.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="index.asciidoc_when-to-use">When to use</h4>
<div class="paragraph">
<p>When you need a container platform with orchestration support due to a higher number of microservices in Azure. Additional built in functionality that comes with Azure Red Hat OpenShift is not required or does not fit into your requirements (e.g. because you want to use a different tooling or need more flexibility.)</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="index.asciidoc_application">Application</h3>
<div class="sect3">
<h4 id="index.asciidoc_overview">Overview</h4>
<div class="paragraph">
<p>The solution is to deploy the containerized application to an Azure Kubernetes Service. Focus of that chapter are designing, building, monitoring and deploying containerized applications. Recommendations for a concrete setup are given in the next chapter.</p>
</div>
<div class="paragraph">
<p>The services that (can) complement Kubernetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Designing</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Each Pod is meant to run a single instance of a given application. If you want to scale your application horizontally (to provide more overall resources by running more instances), you should use multiple Pods, one for each instance. In Kubernetes, this is typically referred to as replication. Replicated Pods are usually created and managed as a group by a workload resource and its controller.</p>
</div>
<div class="paragraph">
<p>The "one-container-per-Pod" model is the most common Kubernetes use case. A more advanced use case is running multiple containers in a pod that need to work together. A Pod can encapsulate an application composed of multiple co-located containers that are tightly coupled and need to share resources. These co-located containers form a single cohesive unit of service - for example, one container serving data stored in a shared volume to the public, while a separate sidecar container refreshes or updates those files. The Pod wraps these containers, storage resources, and an ephemeral network identity together as a single unit.</p>
</div>
<div class="paragraph">
<p>Containers have to store information persistently. <a href="https://docs.microsoft.com/en-us/azure/aks/concepts-storage">Azure</a> provides Azure (managed) disks and Azure files as storage options for persistent volumes.
AKS can connect with databases via wrapper objects such as Services  or databases can be directly deployed to Kubernetes. Options for deplyong a database directly to Kubernetes are given below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SQL server (Microsoft): Options range from single <a href="https://docs.microsoft.com/en-us/sql/linux/tutorial-sql-server-containers-kubernetes?view=sql-server-ver15">sql server</a> to <a href="https://docs.microsoft.com/en-us/sql/linux/tutorial-sql-server-containers-kubernetes-dh2i?view=sql-server-ver15">high availability</a> with failover groups. In both cases MS provides containers that contain sql server.</p>
</li>
<li>
<p>Third party options such as <a href="https://portworx.com/blog/ha-postgresql-azure-aks/">PostgreSQL</a></p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Configuration</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Configmaps are useful to store non-critical data in key-value pair format. They can also be used to inject env vars into pods. Secrets are useful to store sensitive data in key value pair format. They can also be used to inject env vars into pods. You can optionally specify how much of each resource a container needs. The most common resources to specify are CPU and memory (RAM).</p>
</div>
</div>
</div>
</li>
<li>
<p>Compliance</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A <a href="https://kubernetes.io/docs/tasks/configure-pod-container/security-context/">security context</a> defines privilege and access control settings for a pod. Examples are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Discretionary Access Control: Permission to access an object, like a file, is based on user ID (UID) and group ID (GID).</p>
</li>
<li>
<p>Security Enhanced Linux (SELinux): Objects are assigned security labels.</p>
</li>
<li>
<p>Running as privileged or unprivileged.</p>
</li>
<li>
<p>Linux Capabilities: Give a process some privileges, but not all the privileges of the root user.</p>
</li>
<li>
<p>AppArmor: Use program profiles to restrict the capabilities of individual programs.</p>
</li>
<li>
<p>AllowPrivilegeEscalation: Controls whether a process can gain more privileges than its parent process.</p>
</li>
<li>
<p>readOnlyRootFilesystem: Mounts the container’s root filesystem as read-only.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Disks used in your AKS cluster can by encrypted by using your own keys through Azure Key Vault.</p>
</div>
<div class="paragraph">
<p>See building for additional security measures when containers are built.</p>
</div>
</div>
</div>
</li>
<li>
<p>Building (CI part of provisioning)</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Building containers includes the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Building the container image(s)</p>
</li>
<li>
<p>Pushing the image(s) to the registry</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Provisioning tools such as Azure DevOps and Gitub Actions provide special docker tasks/ activities to build images. Pushing to registries is also supported. The following additional features can be used/ should be considered from security perspective:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each time a <strong>base image is updated</strong>, you should also update any downstream container images. Integrate this build process into validation and deployment pipelines such as Azure Pipelines or Jenkins. These pipelines make sure that your applications continue to run on the updated based images. Once your application container images are validated, the AKS deployments can then be updated to run the latest, secure images. Azure Container Registry Tasks can also <a href="https://docs.microsoft.com/en-us/azure/aks/operator-best-practices-container-image-management">automatically update container images</a> when the base image is updated.</p>
</li>
<li>
<p><a href="https://docs.microsoft.com/en-us/azure/aks/operator-best-practices-container-image-management">A container security scan</a> can be included in the <strong>pipelines as quality gate</strong> by using tools like tools such as Twistlock or Aqua.</p>
</li>
<li>
<p>The <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/containers/content-trust?view=azure-devops">provisioning services support</a> Docker Content Trust (DCT). Docker Content Trust (DCT) are digital signatures for data sent to and received from remote Docker registries. These signatures allow client-side or runtime verification of the integrity and publisher of specific image tags.</p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Deployment (CI part of provisioning)</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The term "Deployment" refers to the process that triggers a deployment in Kubernetes whereas a Kubernetes deployment refers to the Kubernets deployment resource. A kubernetes deployment resource is the standard controller for manipulating pods which in turn host the container workloads.</p>
</div>
<div class="paragraph">
<p>A deployment is triggered by the provisioning pipeline.  Depending on the scope a deployment goes beyond the a kubernetes deployment that results in a Kubernetes deployment resource. The various steps across various scenarios can be generalized as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pre-Kubernetes Deployment steps</p>
</li>
<li>
<p>Kubernetes Deployment
Azure provisioning services provide ways to trigger with native kubernetes means such as manifests by supporting special tasks/ activties. However, this results in quite a number of files you have to maintain. Additional tools like <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/deploy/helm-deploy?view=azure-devops">helm</a> (see variation) provide better support.</p>
</li>
<li>
<p>Post-Kubernetes Deployment steps</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The most complex deployment scenario is a rolling update with breaking database changes. In that case pre and post Kubernetes deployment steps are required to <a href="https://stackoverflow.com/questions/48877182/kubernetes-rolling-deployments-and-database-migrations/48880687">handle the breaking database changes</a>. Such an update requires targeting specific components e.g. with a certain version. Labels are key/value pairs that are attached to objects, such as pods. They help in filtering out specific objects. Using a Selector, the client/user can identify a set of objects. Annotations are used to attach arbitrary non-identifying metadata to objects.</p>
</div>
<div class="paragraph">
<p>The basic idea is to break down the breaking database change into multiple non-breaking steps. The <a href="https://stackoverflow.com/questions/48877182/kubernetes-rolling-deployments-and-database-migrations/48880687">steps below</a> refer to a renaming of a column:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a db migration that inserts the new column</p>
</li>
<li>
<p>Change the app so that all writes go to the old and new column</p>
</li>
<li>
<p>Run a task that copies all values from the old to the new column</p>
</li>
<li>
<p>Change the app that it reads from the new column</p>
</li>
<li>
<p>Add a migration that remove the old column</p>
</li>
</ol>
</div>
</div>
</div>
</li>
<li>
<p>Monitoring</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Application logs can help in understanding the activities and status of the application. The logs are particularly useful for debugging problems and monitoring cluster activity. Monitoring applications can be done by storing logs and studying the application’s metrics.</p>
</div>
<div class="paragraph">
<p>Tools like Prometheus-Grafana are popular as they make the management of metrics very easy. Very often, sidecar containers are used as metrics exporters of the main application container.</p>
</div>
<div class="paragraph">
<p>By <a href="https://docs.microsoft.com/en-us/azure/azure-monitor/containers/container-insights-prometheus-integration">integrating with Azure Monitor</a>, a Prometheus server is not required. You just need to expose the Prometheus metrics endpoint through your exporters or pods (application), and the containerized agent for Container insights can scrape the metrics for you.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="mon_cnt_insights.png" alt="Monitoring Container Insights" width="1706" height="632">
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="index.asciidoc_variations">Variations</h4>
<div class="paragraph">
<p>The following additional extra tools can be used in conjunction with Kubernetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deployment</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Instead of having to write separate YAML files for each application manually, you can simply create a Helm chart and let Helm deploy the application to the cluster for you. Helm charts contain templates for various Kubernetes resources that combine to form an application.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="helm_chart_example.png" alt="Helm chart example">
</div>
</div>
<div class="paragraph">
<p>A Helm chart can be customized when deploying it on different Kubernetes clusters. Helm charts can be created in such a way that environment or deployment-specific configurations can be extracted out to a separate file so that these values can be specified when the Helm chart is deployed. The snippet below shows a template using placeholders to refer to the values in values.yaml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="YAML language-YAML">apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ .Values.postgres.name }}
  labels:
    app: {{ .Values.postgres.name }}
    group: {{ .Values.postgres.group }}
spec:
  replicas: {{ .Values.replicaCount }}
  selector:
    matchLabels:
      app: {{ .Values.postgres.name }}
      ...</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Compliance</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>For security reasons and improvement of Helm charts, it is useful to make use of at least one Helm linting tool to ensure your deployments are valid and versioned correctly.</p>
</div>
<div class="paragraph">
<p>Why choosing Polaris as Linting Tool: For helm chart linting, there are several tools like Polaris, kube-score or config-lint available. With Polaris, checks and rules are already given by default, whereby other tools need a lot of custom rules configuration and are therefore more complex to setup. Polaris runs a variety of checks to ensure that Kubernetes pods and controllers are configured using best practices, helping to avoid problems in the future. Polaris can be either installed inside a cluster or as a command-line tool to analyze Kubernetes manifests statically.</p>
</div>
</div>
</div>
</li>
<li>
<p>Configuration</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>See under infrastructure.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="index.asciidoc_when-to-use">When to use</h4>
<div class="paragraph">
<p>When you want to deploy containerized applications to Azure Kubernetes Service.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index.asciidoc_credits">Credits</h2>
<div class="sectionbody">
<div class="imageblock" style="text-align: right;">
<div class="content">
<a class="image" href="https://forms.office.com/Pages/ResponsePage.aspx?id=Wq6idgCfa0-V7V0z13xNYal7m2EdcFdNsyBBMUiro4NUNllHQTlPNU9QV1JRRjk3TTAwVUJCNThTRSQlQCN0PWcu"><img src="ms_guild_logo.png" alt="MS Guild Logo" width="160" height="75"></a>
</div>
</div>
</div>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_introduction.html#introduction-why-should-i-use-devonfw.asciidoc">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc_further-information.html">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
<li>
<p><a href="/website/pages/resources/resources.html">Resources</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-ide-support.asciidoc.html#LICENSE.asciidoc">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-02-18 13:37:03 UTC
</sub></div>
</div>

<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;

      if (document.cookie.indexOf(cookieName) < 0) {
        $("body").append(cookieConsentHtml);
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        $("#cookie-consent").hide();
      });
</script>

</body></html>