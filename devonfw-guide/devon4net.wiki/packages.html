<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- ******** SOCIAL MEDIA META ********** -->

<meta name="title" property="og:title" content="devonfw website">
<meta property="og:type" content="website">
<meta name="image" property="og:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="description" property="og:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta property="og:url" content="https://devonfw.com/index.html">

<meta name="twitter:title" content="devonfw website">
<meta name="twitter:description" content="devonfw is the standard open source software development platform; Serving the full Software Delivery Life Cycle.">
<meta name="twitter:image" content="https://devonfw.com/images/devonfwwebsite.png">
<meta name="twitter:card" content="summary_large_image">

<!-- ************************************* -->


<title>Packages</title>
<!-- devonfw website stylesheet -->
<link rel="stylesheet" type="text/css" href="/devonfw.css">
<!-- Lunr -->
<script src="/website/assets/scripts/lunr.min.js"></script>
<!-- JQuery -->
<script src="/website/assets/scripts/jquery.min.js"></script>
<link rel="stylesheet" href="/website/assets/styles/font-awesome.min.css">
<link rel="stylesheet" href="/website/assets/styles/googlecode.min.css">
<script src="/website/assets/scripts/highlight.min.js"></script>
<script src="/website/assets/scripts/common.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
<link rel="stylesheet" href="/website/assets/styles/bootstrap.min.css">

<script src="/website/assets/scripts/anchor.min.js"></script>

<script src="/website/components/header/search-engine/bundle.js"></script>

<script src="/website/shared/rightmenu.js"></script>

<!-- ************** Google analytics ************ -->
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}

gtag('consent', 'default', {
  'analytics_storage': 'denied'
});
</script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151636804-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151636804-1');
</script>
<script>
  function consentGranted() {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
</script>

<!-- ******************************************** -->


</head>
<body class="article">
<div id="website-navbar" class="website-navbar">
<button id="menu-button" class="menu-button">
  <img src="/images/menu-button.svg" width="32px" height="32px" alt=""/>
</button>

<ul>
<li>
<p><span class="image"><a class="image" href="/website/pages/welcome/welcome.html"><img alt="logo" src="/images/Logo_devonfw.svg"></a></span></p>
</li>
<li>
<p><a href="https://www.katacoda.com/devonfw">Tutorials</a></p>
</li>
<li>
<p><a href="/website/pages/solutions/index.html">Solutions</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Docs</a></p>
</li>
</ul>

<form class="form-inline">
  <div class="search-bar">
    <input
      id="search-field"
      type="search"
      class="form-control mr-sm-2"
      placeholder="Search by keyword(s)..."
      aria-label="Search"
      style="height: auto;"
      autocomplete="off"/>
    <div class="sb-res-pos px-4">
      <div id="click-outside" class="click-outside z-50 hidden"></div>
      <div class="col rounded px-0 border z-100 bg-white hidden search-bar-results" id="search-results-box">
      </div>
    </div>
  </div>
</form>
<a class="navbar-github text-white" href="https://github.com/devonfw/">
  <img src="/images/github-mark.png" width=auto height=auto alt="">
</a></div>
<div id="sidebar" class="wiki-sidebar"></div>

<div id="content" class="mt-4 mt-sm-5">
<div class="toc2">
<div class="title">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc">Packages</a>
<ul class="sectlevel1">
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_packages-overview">Packages overview</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_the-packages">The packages</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.application.webapi.configuration"><code>Devon4Net</code>.Application.WebAPI.Configuration</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.circuitbreaker">Devon4Net.Infrastructure.CircuitBreaker</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.domain.unitofwork">devon4Net.Domain.UnitOfWork</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.extensions">devon4Net.Infrastructure.Extensions</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.jwt">devon4Net.Infrastructure.JWT</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.middleware">devon4Net.Infrastructure.Middleware</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.swagger">devon4Net.Infrastructure.Swagger</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.test">devon4Net.Infrastructure.Test</a></li>
</ul>
</li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_deperecated-packages">Deperecated packages</a>
<ul class="sectlevel2">
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.domain.context">devon4Net.Domain.Context</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.applicationuser">devon4Net.Infrastructure.ApplicationUser</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.communication">devon4Net.Infrastructure.Communication</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.jwt.mvc">devon4Net.Infrastructure.JWT.MVC</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.mvc">devon4Net.Infrastructure.MVC</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.aop">devon4Net.Infrastructure.AOP</a></li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.cors">devon4Net.Infrastructure.Cors</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#devonfw-guide_devon4net.wiki_packages.asciidoc">Required software</a></li>
</ul>
<h1 id="devonfw-guide_devon4net.wiki_packages.asciidoc" class="sect0">Packages</h1>
<div class="sect1">
<h2 id="devonfw-guide_devon4net.wiki_packages.asciidoc_packages-overview">Packages overview</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
<em>devon4Net</em> is composed by a number of packages that increases the functionality and boosts time development. Each package has it&#8217;s own configuration to make them work properly. In <em>appsettings.json</em> set up your environment. On <em>appsettings.{environment}.json</em> you can configure each component.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4net.wiki_packages.asciidoc_the-packages">The packages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can get the devon4Net packages on <a href="https://www.nuget.org/packages?q=devonfw">nuget.org</a>.</p>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.application.webapi.configuration"><code>Devon4Net</code>.Application.WebAPI.Configuration</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>The devon4Net web API configuration core.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package Devon4Net.Application.WebAPI.Configuration</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_default-configuration-values">Default configuration values</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>  "devonfw": {
    "UseDetailedErrorsKey": true,
    "UseIIS": false,
    "UseSwagger": true,
    "Environment": "Development",
    "KillSwitch": {
      "killSwitchSettingsFile": "killswitch.appsettings.json"
    },
    "Kestrel": {
      "UseHttps": true,
      "HttpProtocol": "Http2", //Http1, Http2, Http1AndHttp2, none
      "ApplicationPort": 8082,
      "KeepAliveTimeout": 120, //in seconds
      "MaxConcurrentConnections": 100,
      "MaxConcurrentUpgradedConnections": 100,
      "MaxRequestBodySize": 28.6, //In MB. The default maximum request body size is 30,000,000 bytes, which is approximately 28.6 MB
      "Http2MaxStreamsPerConnection": 100,
      "Http2InitialConnectionWindowSize": 131072, // From 65,535 and less than 2^31 (2,147,483,648)
      "Http2InitialStreamWindowSize": 98304, // From 65,535 and less than 2^31 (2,147,483,648)
      "AllowSynchronousIO": true,
      "SslProtocol": "Tls12", //Tls, Tls11,Tls12, Tls13, Ssl2, Ssl3, none. For Https2 Tls12 is needed
      "ServerCertificate": {
        "Certificate": "localhost.pfx",
        "CertificatePassword": "localhost"
      },
      "ClientCertificate": {
        "DisableClientCertificateCheck": true,
        "RequireClientCertificate": false,
        "CheckCertificateRevocation": true,
        "ClientCertificates": {
          "Whitelist": [
            "3A87A49460E8FE0E2A198E63D408DC58435BC501"
          ],
          "DisableClientCertificateCheck": false
        }
      }
    },
    "IIS": {
      "ForwardClientCertificate": true,
      "AutomaticAuthentication": true,
      "AuthenticationDisplayName" : ""
    }
  }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.circuitbreaker">Devon4Net.Infrastructure.CircuitBreaker</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>The Devon4Net.Infrastructure.CircuitBreaker component implements the retry pattern for HTTP/HTTPS calls.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package Devon4Net.Infrastructure.CircuitBreaker</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_default-configuration-values">Default configuration values</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>  "CircuitBreaker": {
    "CheckCertificate": true,
    "Endpoints": [
      {
        "Name": "SampleService",
        "BaseAddress": "https://localhost:5001/",
        "Headers": {
        },
        "WaitAndRetrySeconds": [
          0.0001,
          0.0005,
          0.001
        ],
        "DurationOfBreak": 0.0005,
        "UseCertificate": true,
        "Certificate": "localhost.pfx",
        "CertificatePassword": "localhost",
        "SslProtocol": "3072" //TLS12
      }
    ]
  }</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CheckCertificate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">True if HTTPS is required. This is useful when developing an API Gateway needs a secured HTTP, disabling this on development we can use communications with a valid server certificate</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Endpoints</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array with predefined sites to connect with</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name key to identify the destination URL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Headers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not ready yet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WaitAndRetrySeconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array which determines the number of retries and the lapse period between each retry. The value is in milliseconds.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Certificate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ceritificate client to use to perform the HTTP call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SslProtocol</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The secure protocol to use on the call</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_protocols">Protocols</h4>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Protocol</strong></th>
<th class="tableblock halign-left valign-top"><strong>Key</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSl3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">48</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Secure Socket Layer (SSL) 3.0 security protocol. SSL 3.0 has been superseded by the Transport Layer Security (TLS) protocol and is provided for backward compatibility only.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">192</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Transport Layer Security (TLS) 1.0 security protocol. The TLS 1.0 protocol is defined in IETF RFC 2246.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">768</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Transport Layer Security (TLS) 1.1 security protocol. The TLS 1.1 protocol is defined in IETF RFC 4346. On Windows systems, this value is supported starting with Windows 7.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3072</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Transport Layer Security (TLS) 1.2 security protocol. The TLS 1.2 protocol is defined in IETF RFC 5246. On Windows systems, this value is supported starting with Windows 7.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TLS13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12288</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the TLS 1.3 security protocol. The TLS protocol is defined in IETF RFC 8446.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_usage">Usage</h4>
<div class="paragraph">
<p>Add via Dependency Injection the circuit breaker instance. PE:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">    public class FooService : Service&lt;TodosContext&gt;, ILoginService
    {
 public FooService(IUnitOfWork&lt;AUTContext&gt; uoW,  ICircuitBreakerHttpClient circuitBreakerClient,
            ILogger&lt;LoginService&gt; logger) : base(uoW)
        {
        ...
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point you can use the circuit breaker functionality in your code.</p>
</div>
<div class="paragraph">
<p>To perform a POST call you should use your circuit breaker instance as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">await circuitBreakerClient.PostAsync&lt;YourOutputClass&gt;(NameOftheService, EndPoint, InputData, MediaType.ApplicationJson).ConfigureAwait(false);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">YourOutputClass</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the class that you are expecting to retrieve from the POST call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NameOftheService</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key name of the endpoint provided in the appsettings.json file at Endpoints[] node</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EndPoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Part of the url to use with the base address. PE: <em>/validate</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>InputData</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your instance of the class with values that you want to use in the POST call</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MediaType.ApplicationJson</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The media type flag for the POST call</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.domain.unitofwork">devon4Net.Domain.UnitOfWork</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>Unit of work implementation for devon4net solution. This unit of work provides the different methods to access the data layer with an atomic context. Sync and Async repository operations are provided. Customized Eager Loading method also provided for custom entity properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
This component will move on next releases to Infrastructure instead of being part of Domain components
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package devon4Net.Domain.UnitOfWork</pre>
</div>
</div>
</li>
<li>
<p>Adding the database connection information:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Add the database connection on the <code>SetupDatabase</code> method at Startup.cs</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">       private void SetupDatabase(IServiceCollection services)
        {
            services.SetupDatabase&lt;TodoContext&gt;(Configuration, "Default", WebAPI.Configuration.Enums.DatabaseType.InMemory);
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Param</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TodoContext</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the database context definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the connection string defined at <em>ConnectionString</em> node at the appsettings configuration file</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WebAPI.Configuration.Enums.DatabaseType.InMemory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the database driver selection. In this case <code>InMemory</code> data base is chosen</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The supported databases are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SqlServer</code></p>
</li>
<li>
<p>Sqlite</p>
</li>
<li>
<p><code>InMemory</code></p>
</li>
<li>
<p>Cosmos</p>
</li>
<li>
<p>PostgreSQL</p>
</li>
<li>
<p><code>MySql</code></p>
</li>
<li>
<p><code>MariaDb</code></p>
</li>
<li>
<p><code>FireBird</code></p>
</li>
<li>
<p>Oracle</p>
</li>
<li>
<p>MSAccess</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="paragraph">
<p>Now you can use the unit of work via dependency injection on your classes:</p>
</div>
<div id="devonfw-guide_devon4net.wiki_packages.asciidoc_img-t-architecture" class="imageblock">
<div class="content">
<a class="image" href="images/uow_sample.png"><img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/uow_sample.png" alt="UOW `DI` Sample" width="*"></a>
</div>
<div class="title">Figure 1. Use of Unit of work via dependency injection</div>
</div>
<div class="paragraph">
<p>As you can see in the image, you can use Unit Of Work class with your defined <code>ModelContext</code> classes.</p>
</div>
<div class="paragraph">
<p><em>Predicate expression builder</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use this expression builder to generate lambda expressions dynamically.</p>
<div class="literalblock">
<div class="content">
<pre>var predicate =  PredicateBuilder.True&lt;T&gt;();</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Where <code>T</code> is a class. At this moment, you can build your expression and apply it to obtain your results in a efficient way and not retrieving data each time you apply an expression.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Example from My Thai Star .Net Core implementation:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">public async Task&lt;PaginationResult&lt;Dish&gt;&gt; GetpagedDishListFromFilter(int currentpage, int pageSize, bool isFav, decimal maxPrice, int minLikes, string searchBy, IList&lt;long&gt; categoryIdList, long userId)
{
    var includeList = new List&lt;string&gt;{"DishCategory","DishCategory.IdCategoryNavigation", "DishIngredient","DishIngredient.IdIngredientNavigation","IdImageNavigation"};

    //Here we create our predicate builder
    var dishPredicate = PredicateBuilder.True&lt;Dish&gt;();


    //Now we start applying the different criteria:
    if (!string.IsNullOrEmpty(searchBy))
    {
        var criteria = searchBy.ToLower();
        dishPredicate = dishPredicate.And(d =&gt; d.Name.ToLower().Contains(criteria) || d.Description.ToLower().Contains(criteria));
    }

    if (maxPrice &gt; 0) dishPredicate = dishPredicate.And(d=&gt;d.Price&lt;=maxPrice);

    if (categoryIdList.Any())
    {
        dishPredicate = dishPredicate.And(r =&gt; r.DishCategory.Any(a =&gt; categoryIdList.Contains(a.IdCategory)));
    }

    if (isFav &amp;&amp; userId &gt;= 0)
    {
        var favourites = await UoW.Repository&lt;UserFavourite&gt;().GetAllAsync(w=&gt;w.IdUser == userId);
        var dishes = favourites.Select(s =&gt; s.IdDish);
        dishPredicate = dishPredicate.And(r=&gt; dishes.Contains(r.Id));
    }

    // Now we can use the predicate to retrieve data from database with just one call
    return await UoW.Repository&lt;Dish&gt;().GetAllIncludePagedAsync(currentpage, pageSize, includeList, dishPredicate);

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.extensions">devon4Net.Infrastructure.Extensions</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>Miscellaneous extension library which contains :
- Predicate expression builder
- <code>DateTime</code> formatter
- <code>HttpClient</code>
- <code>HttpContext</code> (Middleware support)</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package devon4Net.Infrastructure.Extensions</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>HttpContext</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>TryAddHeader method is used on <em>devon4Net.Infrastructure.Middleware</em> component to add automatically response header options such authorization.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.jwt">devon4Net.Infrastructure.JWT</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>JSON Web Token (JWT) is an open standard (RFC 7519) that defines a compact and self-contained way for securely transmitting information between parties as a JSON object. This information can be verified and trusted because it is digitally signed. JWTs can be signed using a secret (with the` HMAC` algorithm) or a public/private key pair using <code>RSA</code> or <code>ECDSA</code>.</p>
</div>
</blockquote>
<div class="attribution">
<cite>https://jwt.io/introduction/</cite><br>
&#8212; What is JSON Web Token?
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>devon4Net component to manage  JWT standard to provide security to .Net API applications.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; devon4Net.Infrastructure.JWT</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_default-configuration-values">Default configuration values</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"JWT": {
    "Audience": "devon4Net",
    "Issuer": "devon4Net",
    "TokenExpirationTime": 60,
    "ValidateIssuerSigningKey": true,
    "ValidateLifetime": true,
    "ClockSkew": 5,
    "Security": {
      "SecretKeyLengthAlgorithm": "",
      "SecretKeyEncryptionAlgorithm": "",
      "SecretKey": "",
      "Certificate": "",
      "CertificatePassword": "",
      "CertificateEncryptionAlgorithm": ""
    }
  }</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code><em>ClockSkew</em></code> indicates the token expiration time in minutes</p>
</li>
<li>
<p><code><em>Certificate</em></code> you can specify the name of your certificate (if it is on the same path) or the full path of the certificate. If the certificate does not exists an exception will be raised.</p>
</li>
<li>
<p><code><em>SecretKeyLengthAlgorithm</em></code>, <code><em>SecretKeyEncryptionAlgorithm</em></code> and <code><em>CertificateEncryptionAlgorithm</em></code> supported algorithms are:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all" style="width: 100%;">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Algorithm</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Aes128Encryption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#aes128-cbc"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Aes192Encryption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#aes192-cbc"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Aes256Encryption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#aes256-cbc"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DesEncryption</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#des-cbc"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes128KeyWrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#kw-aes128"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes192KeyWrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#kw-aes192"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes256KeyWrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#kw-aes256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaV15KeyWrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#rsa-1_5"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Ripemd160Digest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#ripemd160"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaOaepKeyWrap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#rsa-oaep"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes128KW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A128KW"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes256KW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A256KW"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaPKCS1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"RSA1_5"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaOAEP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"RSA-OAEP"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ExclusiveC14n</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/10/xml-exc-c14n#"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ExclusiveC14nWithComments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/10/xml-exc-c14n#WithComments"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EnvelopedSignature</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2000/09/xmldsig#enveloped-signature"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sha256Digest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#sha256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sha384Digest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#sha384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sha512Digest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmlenc#sha512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sha256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"SHA256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sha384</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"SHA384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sha512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"SHA512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EcdsaSha256Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EcdsaSha384Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EcdsaSha512Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#ecdsa-sha512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HmacSha256Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#hmac-sha256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HmacSha384Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#hmac-sha384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HmacSha512Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#hmac-sha512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSha256Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSha384Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSha512Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSsaPssSha256Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2007/05/xmldsig-more#sha256-rsa-MGF1"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSsaPssSha384Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2007/05/xmldsig-more#sha384-rsa-MGF1"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSsaPssSha512Signature</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"http://www.w3.org/2007/05/xmldsig-more#sha512-rsa-MGF1"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EcdsaSha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"ES256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EcdsaSha384</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"ES384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EcdsaSha512</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"ES512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HmacSha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"HS256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HmacSha384</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"HS384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HmacSha512</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"HS512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">None</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"none"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RsaSha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"RS256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RsaSha384</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"RS384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RsaSha512</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"RS512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSsaPssSha256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"PS256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSsaPssSha384</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"PS384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RsaSsaPssSha512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"PS512"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes128CbcHmacSha256</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A128CBC-HS256"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes192CbcHmacSha384</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A192CBC-HS384"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Aes256CbcHmacSha512</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A256CBC-HS512"</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="icon-note" title=""></i>
</td>
<td class="content">
Please check <a href="https://github.com/AzureAD/azure-activedirectory-identitymodel-extensions-for-dotnet/wiki/Supported-Algorithms">Microsoft documentation</a> to get the lastest updates on supported encryption algorithms
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Add this line of code  (only if you use this component stand alone):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>services.AddBusinessCommonJwtPolicy();</code></pre>
</div>
</div>
<div class="paragraph">
<p>On</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Startup.cs</pre>
</div>
</div>
<div class="paragraph">
<p>or on:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>devon4Net.Application.Configuration.Startup/JwtApplicationConfiguration/ConfigureJwtPolicy method.</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Inside the <code><em>AddBusinessCommonJwtPolicy</em></code> method you can add your  JWT Policy like in My Thai Star application sample:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#"> services.ConfigureJwtAddPolicy("MTSWaiterPolicy", "role", "waiter");</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>The certificate will be used to generate the key to encrypt the json web token.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.middleware">devon4Net.Infrastructure.Middleware</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="ulist">
<ul>
<li>
<p>devon4Net support for middleware classes.</p>
</li>
<li>
<p>In ASP.NET Core, middleware classes can handle an HTTP request or response. Middleware can either:</p>
<div class="ulist">
<ul>
<li>
<p>Handle an incoming HTTP request by generating an HTTP response.</p>
</li>
<li>
<p>Process an incoming HTTP request, modify it, and pass it on to another piece of middleware.</p>
</li>
<li>
<p>Process an outgoing HTTP response, modify it, and pass it on to either another piece of middleware, or the ASP.NET Core web server.</p>
</li>
</ul>
</div>
</li>
<li>
<p>devon4Net supports the following automatic response headers:</p>
<div class="ulist">
<ul>
<li>
<p><code>AccessControlExposeHeader</code></p>
</li>
<li>
<p><code>StrictTransportSecurityHeader</code></p>
</li>
<li>
<p><code>XFrameOptionsHeader</code></p>
</li>
<li>
<p><code>XssProtectionHeader</code></p>
</li>
<li>
<p><code>XContentTypeOptionsHeader</code></p>
</li>
<li>
<p><code>ContentSecurityPolicyHeader</code></p>
</li>
<li>
<p><code>PermittedCrossDomainPoliciesHeader</code></p>
</li>
<li>
<p><code>ReferrerPolicyHeader:toc: macro</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package devon4Net.Infrastructure.Middleware</pre>
</div>
</div>
</li>
<li>
<p>You can configure your Middleware configuration on <em>appsettings.{environment}.json</em>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"Middleware": {
    "Headers": {
      "AccessControlExposeHeader": "Authorization",
      "StrictTransportSecurityHeader": "",
      "XFrameOptionsHeader": "DENY",
      "XssProtectionHeader": "1;mode=block",
      "XContentTypeOptionsHeader": "nosniff",
      "ContentSecurityPolicyHeader": "",
      "PermittedCrossDomainPoliciesHeader": "",
      "ReferrerPolicyHeader": ""
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On the above sample, the server application will add to response header the <code>AccessControlExposeHeader</code>, XFrameOptionsHeader, XssProtectionHeader and XContentTypeOptionsHeader headers.</p>
</li>
<li>
<p>If the header response type does not have a value, it will not be added to the response headers.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.swagger">devon4Net.Infrastructure.Swagger</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="ulist">
<ul>
<li>
<p>devon4net Swagger abstraction to provide full externalized easy configuration.</p>
</li>
<li>
<p>Swagger offers the easiest to use tools to take full advantage of all the capabilities of the OpenAPI Specification (OAS).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; devon4Net.Infrastructure.Swagger</pre>
</div>
</div>
</li>
<li>
<p>You can configure your Swagger configuration on <em>appsettings.{environment}.json</em>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"Swagger": {
    "Version": "v1",
    "Title": "devon4net API",
    "Description": "devon4net API Contract",
    "Terms": "https://www.devonfw.com/terms-of-use/",
    "Contact": {
      "Name": "devonfw",
      "Email": "sample@mail.com",
      "Url": "https://www.devonfw.com"
    },
    "License": {
      "Name": "devonfw - Terms of Use",
      "Url": "https://www.devonfw.com/terms-of-use/"
    },
    "Endpoint": {
      "Name": "V1 Docs",
      "Url": "/swagger/v1/swagger.json",
      "UrlUi": "swagger",
      "RouteTemplate": "swagger/v1/{documentName}/swagger.json"
    }
  }</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add this line of code (only if you use this component stand alone):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">services.ConfigureSwaggerService();</code></pre>
</div>
</div>
<div class="paragraph">
<p>On</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Startup.cs</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Also add this line of code  (only if you use this component stand alone):</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">app.ConfigureSwaggerApplication();</code></pre>
</div>
</div>
<div class="paragraph">
<p>On</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Startup.cs/Configure(IApplicationBuilder app, IHostingEnvironment env)</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure your API actions and non-route parameters are decorated with explicit "Http" and "From" bindings.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>To access to swagger UI launch your API project and type in your html browser the url <em><a href="http://localhost:yourPort/swagger" class="bare">http://localhost:yourPort/swagger</a></em>.</p>
</li>
<li>
<p>In order to generate the documentation annotate your actions with summary, remarks and response tags:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/// &lt;summary&gt;
/// Method to make a reservation with potential guests. The method returns the reservation token with the format: {(CB_|GB_)}{now.Year}{now.Month:00}{now.Day:00}{_}{MD5({Host/Guest-email}{now.Year}{now.Month:00}{now.Day:00}{now.Hour:00}{now.Minute:00}{now.Second:00})}
/// &lt;/summary&gt;
/// &lt;param name="bookingDto"&gt;&lt;/param&gt;
/// &lt;response code="201"&gt;Ok.&lt;/response&gt;
/// &lt;response code="400"&gt;Bad request. Parser data error.&lt;/response&gt;
/// &lt;response code="401"&gt;Unauthorized. Authentication fail.&lt;/response&gt;
/// &lt;response code="403"&gt;Forbidden. Authorization error.&lt;/response&gt;
/// &lt;response code="500"&gt;Internal Server Error. The search process ended with error.&lt;/response&gt;
[HttpPost]
[HttpOptions]
[Route("/mythaistar/services/rest/bookingmanagement/v1/booking")]
[AllowAnonymous]
[EnableCors("CorsPolicy")]
public async Task&lt;IActionResult&gt; Booking([FromBody]BookingDto bookingDto)
{
    try
    {

    ...</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that your project has the <em>generateXMLdocumentationfile</em> check active on build menu:</p>
</li>
</ul>
</div>
<div id="devonfw-guide_devon4net.wiki_packages.asciidoc_img-t-architecture" class="imageblock">
<div class="content">
<a class="image" href="images/swaggerDocXMLCheck.png"><img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/swaggerDocXMLCheck.png" alt="Generate documentation XML check" width="*"></a>
</div>
<div class="title">Figure 2. Swagger documentation</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ensure that your XML files has the attribute copy always to true:</p>
</li>
</ul>
</div>
<div id="devonfw-guide_devon4net.wiki_packages.asciidoc_img-t-architecture" class="imageblock">
<div class="content">
<a class="image" href="images/swaggerDoc.png"><img src="/home/runner/work/devonfw.github.io/devonfw.github.io/target/generated-docs/images/swaggerDoc.png" alt="Generate documentation XML check" width="*"></a>
</div>
<div class="title">Figure 3. Swagger documentation</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.test">devon4Net.Infrastructure.Test</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>devon4Net Base classes to create unit tests and integration tests with Moq and <code>xUnit</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Load the template:
&gt; dotnet new -i devon4Net.Test.Template
&gt; dotnet new devon4NetTest</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>At this point you can find this classes:</p>
<div class="ulist">
<ul>
<li>
<p>BaseManagementTest</p>
</li>
<li>
<p>DatabaseManagementTest&lt;T&gt; (Where <code>T</code> is a <em>devon4NetBaseContext</em> class)</p>
</li>
</ul>
</div>
</li>
<li>
<p>For unit testing, inherit a class from <em>BaseManagementTest</em>.</p>
</li>
<li>
<p>For integration tests, inherit a class from <em>DatabaseManagementTest</em>.</p>
</li>
<li>
<p>The recommended databases in integration test are <em>in memory database</em> or <em>SQlite database</em>.</p>
</li>
<li>
<p>Please check <em>My thai Star</em> test project.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="devonfw-guide_devon4net.wiki_packages.asciidoc_deperecated-packages">Deperecated packages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.domain.context">devon4Net.Domain.Context</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>devon4Net.Domain.Context contains the extended class devon4NetBaseContext in order to make easier the process of having a model context configured against different database engines. This configuration allows an easier testing configuration against local and in memory databases.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package devon4Net.Domain.Context</pre>
</div>
</div>
</li>
<li>
<p>Add to <em>appsettings.{environment}.json</em> file your database connections:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"ConnectionStrings":
{
"DefaultConnection":
"Server=localhost;Database=MyThaiStar;User Id=sa;Password=sa;MultipleActiveResultSets=True;",

"AuthConnection":
"Server=(localdb)\\mssqllocaldb;Database=aspnet-DualAuthCore-5E206A0B-D4DA-4E71-92D3-87FD6B120C5E;Trusted_Connection=True;MultipleActiveResultSets=true",

"SqliteConnection": "Data Source=c:\\tmp\\membership.db;"
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On Startup.cs :</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">void ConfigureServices(IServiceCollection services)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add your database connections defined on previous point:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">services.ConfigureDataBase(
new Dictionary&lt;string, string&gt; {
{ConfigurationConst.DefaultConnection, Configuration.GetConnectionString(ConfigurationConst.DefaultConnection) }});</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On devon4Net.Application.Configuration.Startup/DataBaseConfiguration/ConfigureDataBase configure your connections.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.applicationuser">devon4Net.Infrastructure.ApplicationUser</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>devon4Net Application user classes to implement basic Microsoft&#8217;s basic authentication in order to be used on authentication methodologies such Jason Web Token (JWT).</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; devon4Net.Infrastructure.ApplicationUser</pre>
</div>
</div>
</li>
<li>
<p>Add the database connection string for user management on <em>appsettings.{environment}.json</em>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"ConnectionStrings":
{
"AuthConnection":
"Server=(localdb)\\mssqllocaldb;Database=aspnet-DualAuthCore-5E206A0B-D4DA-4E71-92D3-87FD6B120C5E;Trusted_Connection=True;MultipleActiveResultSets=true"
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the following line of code</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>services.AddApplicationUserDependencyInjection();</code></pre>
</div>
</div>
<div class="paragraph">
<p>On</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Startup.cs/ConfigureServices(IServiceCollection services)</pre>
</div>
</div>
<div class="paragraph">
<p>or on:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>devon4Net.Application.Configuration.Startup/DependencyInjectionConfiguration/ConfigureDependencyInjectionService method.</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the data seeder on Configure method on start.cs class:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">public void Configure(IApplicationBuilder app, IHostingEnvironment env, DataSeeder seeder)
{
    ...

    app.UseAuthentication();
    seeder.SeedAsync().Wait();

    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>You can use the following methods to set up the database configuration:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>public static void AddApplicationUserDbContextInMemoryService(this IServiceCollection services)

public static void AddApplicationUserDbContextSQliteService(this IServiceCollection services, string connectionString)

public static void AddApplicationUserDbContextSQlServerService(this IServiceCollection services, string connectionString)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The method <code><em>AddApplicationUserDbContextInMemoryService</em></code> uses the <em>AuthContext</em> connection string name to set up the database.</p>
</li>
<li>
<p>This component is used with the components <em>devon4Net.Infrastructure.JWT</em> and <em>devon4Net.Infrastructure.JWT.MVC</em>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.communication">devon4Net.Infrastructure.Communication</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>Basic client classes to  invoke` GET`/POST methods asynchronously. This component has the minimal classes to send basic data. For more complex operations please use <em>ASP4Net.Infrastructure.Extensions</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; devon4Net.Infrastructure.Communication</pre>
</div>
</div>
</li>
<li>
<p>Create an instance of <em>RestManagementService</em> class.</p>
</li>
<li>
<p>Use next methods to use GET/POST basic options:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>public Task&lt;string&gt; CallGetMethod(string url);
public Task&lt;Stream&gt; CallGetMethodAsStream(string url);
public Task&lt;string&gt; CallPostMethod&lt;T&gt;(string url, T dataToSend);
public Task&lt;string&gt; CallPutMethod&lt;T&gt;(string url, T dataToSend);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>Example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">private async Task RestManagementServiceSample(EmailDto dataToSend)
{
    var url = Configuration["EmailServiceUrl"];
    var restManagementService = new RestManagementService();
    await restManagementService.CallPostMethod(url, dataToSend);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.jwt.mvc">devon4Net.Infrastructure.JWT.MVC</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="ulist">
<ul>
<li>
<p>devon4Net Extended controller to interact with  JWT features</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Extend your _ Microsoft.AspNetCore.Mvc.Controller_ class with <em>devon4NetJWTController</em> class:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">public class LoginController : devon4NetJWTController
{
    private readonly ILoginService _loginService;

    public LoginController(ILoginService loginService,  SignInManager&lt;ApplicationUser&gt;  signInManager, UserManager&lt;ApplicationUser&gt; userManager, ILogger&lt;LoginController&gt; logger, IMapper mapper) : base(logger,mapper)
    {
        _loginService = loginService;
    }

    ....</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>In order to generate a  JWT, you should implement the  JWT generation on user login. For example, in My Thai Star is created as follows:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>public async Task&lt;IActionResult&gt; Login([FromBody]LoginDto loginDto)
{
    try
    {
        if (loginDto == null) return Ok();
        var logged = await _loginService.LoginAsync(loginDto.UserName, loginDto.Password);

        if (logged)
        {
            var user = await _loginService.GetUserByUserNameAsync(loginDto.UserName);

            var encodedJwt = new JwtClientToken().CreateClientToken(_loginService.GetUserClaimsAsync(user));

            Response.Headers.Add("Access-Control-Expose-Headers", "Authorization");

            Response.Headers.Add("Authorization", $"{JwtBearerDefaults.AuthenticationScheme} {encodedJwt}");

            return Ok(encodedJwt);
        }
        else
        {
            Response.Headers.Clear();
            return StatusCode((int)HttpStatusCode.Unauthorized, "Login Error");
        }

    }
    catch (Exception ex)
    {
        return StatusCode((int)HttpStatusCode.InternalServerError, $"{ex.Message} : {ex.InnerException}");
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>In My Thai Star the  JWT will contain the user information such id, roles&#8230;&#8203;</p>
</li>
<li>
<p>Once you extend your controller with <em>devon4NetJWTController</em> you will have available these methods to simplify user management:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">    public interface Idevon4NetJWTController
    {
        // Gets the current user
        JwtSecurityToken GetCurrentUser();

        // Gets an specific assigned claim of current user
        Claim GetUserClaim(string claimName, JwtSecurityToken jwtUser = null);

        // Gets all the assigned claims of current user
        IEnumerable&lt;Claim&gt; GetUserClaims(JwtSecurityToken jwtUser = null);
    }</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.mvc">devon4Net.Infrastructure.MVC</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>Common classes to extend controller functionality on API. Also provides support for paged results in devon4Net applications and automapper injected class.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; devon4Net.Infrastructure.MVC</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>The generic class <em>ResultObjectDto&lt;T&gt;</em> provides a typed result object with pagination.</p>
</li>
<li>
<p>The extended class provides the following methods:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">        ResultObjectDto&lt;T&gt; GenerateResultDto&lt;T&gt;(int? page, int? size, int? total);
        ResultObjectDto&lt;T&gt; GenerateResultDto&lt;T&gt;(List&lt;T&gt; result, int? page = null, int? size = null);</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>GenerateResultDto</em> provides typed <em>ResultObjectDto</em> object or a list of typed <em>ResultObjectDto</em> object. The aim of this methods is to provide a clean management for result objects and not repeating code through the different controller classes.</p>
</li>
<li>
<p>The following sample from <em>My Thai Star</em> shows how to use it:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">public async Task&lt;IActionResult&gt; Search([FromBody] FilterDtoSearchObject filterDto)
{
    if (filterDto == null) filterDto = new FilterDtoSearchObject();

    try
    {
        var dishList = await _dishService.GetDishListFromFilter(false, filterDto.GetMaxPrice(), filterDto.GetMinLikes(), filterDto.GetSearchBy(),filterDto.GetCategories(), -1);


        return new OkObjectResult(GenerateResultDto(dishList).ToJson());
    }
    catch (Exception ex)
    {
        return StatusCode((int)HttpStatusCode.InternalServerError, $"{ex.Message} : {ex.InnerException}");
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.aop">devon4Net.Infrastructure.AOP</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>Simple AOP Exception handler for .Net Controller classes integrated with Serilog.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; Install-Package devon4Net.Domain.AOP</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Add this line of code on <code>ConfigureServices</code> method on Startup.cs</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>services.AddAopAttributeService();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="paragraph">
<p>Now automatically your exposed API methods exposed on controller classes will be tracked on the methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OnActionExecuting</p>
</li>
<li>
<p>OnActionExecuted</p>
</li>
<li>
<p>OnResultExecuting</p>
</li>
<li>
<p>OnResultExecuted</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If an exception occurs, a message will be displayed on log with the stack trace.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="devonfw-guide_devon4net.wiki_packages.asciidoc_devon4net.infrastructure.cors">devon4Net.Infrastructure.Cors</h3>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_description">Description</h4>
<div class="paragraph">
<p>Enables CORS configuration for devon4Net application. Multiple domains can be configured from configuration. Mandatory to web clients (p.e. Angular) to prevent making AJAX requests to another domain.</p>
</div>
<div class="paragraph">
<p>Cross-Origin Resource Sharing (CORS) is a mechanism that uses additional HTTP headers to tell a browser to let a web application running at one origin (domain) have permission to access selected resources from a server at a different origin. A web application makes a cross-origin HTTP request when it requests a resource that has a different origin (domain, protocol, and port) than its own origin.</p>
</div>
<div class="paragraph">
<p>Please refer to <a href="https://docs.microsoft.com/en-us/aspnet/core/security/cors?view=aspnetcore-2.1">this link</a> to get more information about CORS and .Net core.</p>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_configuration">Configuration</h4>
<div class="ulist">
<ul>
<li>
<p>Install package on your solution:</p>
<div class="literalblock">
<div class="content">
<pre>PM&gt; devon4Net.Infrastructure.Cors</pre>
</div>
</div>
</li>
<li>
<p>You can configure your Cors configuration on <em>appsettings.{environment}.json</em>:</p>
<div class="literalblock">
<div class="content">
<pre>`CorsPolicy`: indicates the name of the policy. You can use this name to add security headers on your API exposed methods.</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Origins: The allowed domains</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Headers: The allowed headers such accept,content-type,origin,x-custom-header</pre>
</div>
</div>
</li>
<li>
<p>If you specify the cors configuration as empty array, a default cors-policy will be used with all origins enabled:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="json language-json">  "Cors": []</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>On the other hand, you can specify different Cors policies in your solution as follows:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"Cors": []
[
  {
    "CorsPolicy": "CorsPolicy1",
    "Origins": "http:example.com,http:www.contoso.com",
    "Headers": "accept,content-type,origin,x-custom-header",
    "Methods": "GET,POST,HEAD",
    "AllowCredentials": true
  },
  {
    "CorsPolicy": "CorsPolicy2",
    "Origins": "http:example.com,http:www.contoso.com",
    "Headers": "accept,content-type,origin,x-custom-header",
    "Methods": "GET,POST,HEAD",
    "AllowCredentials": true
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="devonfw-guide_devon4net.wiki_packages.asciidoc_notes">Notes</h4>
<div class="ulist">
<ul>
<li>
<p>To use CORS in your API methods, use the next notation:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>[EnableCors("YourCorsPolicy")]
public IActionResult Index() {
    return View();
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>if you want to disable the CORS check use the following annotation:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="C# language-C#">[DisableCors]
public IActionResult Index() {
    return View();
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="devonfw-guide_devon4net.wiki_packages.asciidoc" class="sect0">Required software</h1>
<div class="paragraph">
<p><a href="https://code.visualstudio.com/">Visual Studio Code</a></p>
</div>
<div class="paragraph">
<p><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.csharp">C# Extension for VS Code</a></p>
</div>
<div class="paragraph">
<p><a href="https://www.microsoft.com/net/core">.Net Core SDK</a></p>
</div>
<div class="paragraph">
<p><a href="https://docs.microsoft.com/en-us/aspnet/core/security/cors?view=aspnetcore-2.1">CORS in .Net Core</a></p>
</div>
</div>
<div id="footer" class="footer">
<div class="openblock footerLinks">
<div class="content">
<div class="dlist linklist">
<dl>
<dt class="hdlist1">About</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc_introduction.html">About devonfw</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_introduction-why-should-i-use-devonfw.asciidoc.html">Features</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc_further-information.html">Technology Stack</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Explore</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_getting-started.wiki_getting-started.asciidoc.html">Getting started</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_devon4j.wiki_architecture.asciidoc.html">Architecture</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Docs</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="/website/pages/docs/devonfw-guide_ide.wiki_devonfw-ide-introduction.asciidoc.html">User guide</a></p>
</li>
<li>
<p><a href="/website/pages/docs/devonfw-guide_general_master-release-notes.asciidoc.html">Releases information</a></p>
</li>
<li>
<p><a href="/website/pages/docs/master.html">Wiki</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist linklist">
<dl>
<dt class="hdlist1">Community</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/orgs/devonfw/people">Contributors</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw/devonfw.github.io/blob/develop/README.asciidoc">Website Contribution</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist footerFooter">
<ul>
<li>
<p><a href="https://devonfw.com/website/pages/docs/devonfw-guide_ide.wiki_LICENSE.asciidoc.html">Terms of Use</a></p>
</li>
<li>
<p><a href="https://github.com/devonfw">Support</a></p>
</li>
</ul>
</div>
</div>
    <script>
      let bb = document.getElementById('menu-button');
      bb.addEventListener('click', function() {
        document.querySelector('.website-navbar ul').classList.toggle('visible');
        console.log(document.querySelector('.website-navbar ul'))
      })
    </script>
    <script type="module">
      import { EditLinksModule } from '/website/shared/editlinks.js';

      let alwaysVisible = true;
      if(document.location.pathname.endsWith("pages/welcome/welcome.html")) {
        alwaysVisible = false;
      }
      EditLinksModule.addEditLinks(alwaysVisible);
    </script>
    <script src="/website/assets/scripts/popper.min.js"></script>
    <script src="/website/assets/scripts/bootstrap.min.js"></script>
<div class="footnote"><sub>

Last updated 2022-05-31 16:04:10 UTC
</sub></div>
</div>
</div>
<link rel="stylesheet" type="text/css" href="https://cginternal.devonfw.com/websitesnippets/main.css">
<script async src="https://cginternal.devonfw.com/websitesnippets/main.js"></script>
<script>
  if(!document.location.pathname.endsWith("pages/welcome/welcome.html")) {
    anchors.options.visible = 'always';
  }
  anchors.add();
</script>
<script>
  var internalUrls = ["https://cginternal.devonfw.com/websitesnippets/"];
  $(".internal").each(function(){
    internalUrls.forEach((internalUrl, index) => {
      $.ajax({url: internalUrl + $(this).text() + "/index.html" })
      .then(r => {
        var leftDiv = $('<div class="info"><span class="infoText">Internal</span><img class="infoImage" src="' + internalUrl + 'logo.png"/></div>');
        var rightFirstDiv = $('<div class="message">This is only visible inside of the corporate network.</div>');
        var rightLastDiv = $('<div class="content"></div>');
        rightLastDiv.html(r);
        var rightDiv = $('<div class="right"></div>');
        rightDiv.append(rightFirstDiv);
        rightDiv.append(rightLastDiv);
        $(this).html(leftDiv);
        $(this).append(rightDiv);
        $(this).addClass("internal-active");
        $(this).removeClass("internal");
      })
    });
	});
</script>
<script>
      let cookieName = 'cookie_consent';
      let expiryTime = new Date(2037, 11, 21);
      let today = new Date();
      let cookieConsentDeclinedDate = localStorage.getItem("cookie_consent_declined");
      let dateDiffHours = 0;
      let cookieConsentHtml = `
      <div id="cookie-consent">
        <p>
          We use cookies to perform analytics and enhance user experience. Do you accept to the use of cookies?
        </p>
        <p class="cookie-consent-buttons">
          <a id="decline-cookie-btn" class="btn white-button" href="javascript:void(0)">Decline</a>
          <a id="accept-cookie-btn" class="btn blue-button" href="javascript:void(0)">Accept</a>
        </p>
      </div>
      `;
      dateDiffHours = cookieConsentDeclinedDate ? Math.abs(cookieConsentDeclinedDate - today) / 36e5 : 0;
      if (document.cookie.indexOf(cookieName) < 0) {
        if (cookieConsentDeclinedDate) {
          if (dateDiffHours > 24) {
            $("body").append(cookieConsentHtml);
          }
        } else {
          $("body").append(cookieConsentHtml);
        }
      }
      $("#accept-cookie-btn").click(function() {
        document.cookie = `${cookieName}=accept;expires=${expiryTime};path=/`;
        localStorage.removeItem("cookie_consent_declined");
        consentGranted();
        $("#cookie-consent").hide();
      });
      $("#decline-cookie-btn").click(function() {
        localStorage.setItem("cookie_consent_declined", today);
        $("#cookie-consent").hide();
      });
</script>
</body>
</html>